<!--pages/profile/profile.wxml-->
<view class="container">
  <!-- 用户信息头部 -->
  <view class="header-section">
    <view wx:if="{{isLoggedIn}}" class="user-card">
      <image class="user-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill" />
      <view class="user-info">
        <text class="user-name">{{userInfo.nickName}}</text>
        <text class="user-status">已登录</text>
      </view>
      <button class="logout-btn" bindtap="handleLogout">退出</button>
    </view>

    <view wx:else class="login-card">
      <view class="login-avatar">👤</view>
      <view class="login-info">
        <text class="login-title">未登录</text>
        <text class="login-subtitle">登录后体验完整功能</text>
      </view>
      <button class="login-btn" bindtap="handleLogin">登录</button>
    </view>
  </view>

  <!-- 统计数据 -->
  <view wx:if="{{isLoggedIn}}" class="stats-section">
    <view class="section-title">我的测试统计</view>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{stats.totalTests}}</text>
        <text class="stat-label">总测试次数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.averageScore}}</text>
        <text class="stat-label">平均得分</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.latestDate || '--'}}</text>
        <text class="stat-label">最近测试</text>
      </view>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section">
    <view class="section-title">功能菜单</view>

    <view class="menu-list">
      <view class="menu-item" bindtap="startTest">
        <view class="menu-icon">🧠</view>
        <text class="menu-text">开始测试</text>
        <text class="menu-arrow">></text>
      </view>

      <view class="menu-item" bindtap="viewHistory">
        <view class="menu-icon">📋</view>
        <text class="menu-text">测试历史</text>
        <text class="menu-arrow">></text>
      </view>

      <view class="menu-item" bindtap="shareApp">
        <view class="menu-icon">📤</view>
        <text class="menu-text">分享应用</text>
        <text class="menu-arrow">></text>
      </view>
    </view>
  </view>

  <!-- 设置菜单 -->
  <view class="settings-section">
    <view class="section-title">设置</view>

    <view class="menu-list">
      <view class="menu-item" bindtap="aboutUs">
        <view class="menu-icon">ℹ️</view>
        <text class="menu-text">关于我们</text>
        <text class="menu-arrow">></text>
      </view>

      <view class="menu-item" bindtap="feedback">
        <view class="menu-icon">💬</view>
        <text class="menu-text">意见反馈</text>
        <text class="menu-arrow">></text>
      </view>

      <view class="menu-item danger" bindtap="clearData">
        <view class="menu-icon">🗑️</view>
        <text class="menu-text">清除数据</text>
        <text class="menu-arrow">></text>
      </view>
    </view>
  </view>

  <!-- 版本信息 -->
  <view class="version-section">
    <text class="version-text">版本 1.0.0</text>
    <text class="copyright-text">© 2024 大五人格测试</text>
  </view>
</view>