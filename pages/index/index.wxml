<!--pages/index/index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨æ¬¢è¿ä¿¡æ¯ -->
  <view class="header">
    <view class="welcome-section">
      <view class="welcome-icon">ğŸ§ </view>
      <view class="welcome-content">
        <text class="welcome-title">å¤§äº”äººæ ¼æµ‹è¯•</text>
        <text class="welcome-desc">æ·±å…¥äº†è§£è‡ªå·±çš„æ€§æ ¼ç‰¹å¾ï¼Œå‘ç°æ›´å¥½çš„è‡ªå·±</text>
      </view>
    </view>
  </view>

  <!-- æµ‹è¯•å¡ç‰‡ -->
  <view class="test-section">
    <view class="test-card card">
      <view class="test-header">
        <view class="test-icon">ğŸ§ </view>
        <view class="test-info">
          <text class="test-title">å¤§äº”äººæ ¼æµ‹è¯•</text>
          <text class="test-description">é€šè¿‡50é“ä¸“ä¸šé¢˜ç›®ï¼Œä»5ä¸ªç»´åº¦å…¨é¢äº†è§£ä½ çš„æ€§æ ¼ç‰¹å¾</text>
        </view>
      </view>

      <!-- æµ‹è¯•è¿›åº¦ -->
      <view wx:if="{{testProgress}}" class="progress-section">
        <view class="progress-info">
          <text class="progress-text">ä¸Šæ¬¡æµ‹è¯•è¿›åº¦ï¼š{{testProgress.current}}/50</text>
          <text class="progress-date">ä¿å­˜äº {{testProgress.savedAt}}</text>
        </view>
      </view>

      <view class="test-features">
        <view class="feature-item">
          <text class="feature-icon">âœ¨</text>
          <text class="feature-text">AIä¸ªæ€§åˆ†æ</text>
        </view>
        <view class="feature-item">
          <text class="feature-icon">ğŸ“Š</text>
          <text class="feature-text">äº”ç»´åº¦è¯„åˆ†</text>
        </view>
        <view class="feature-item">
          <text class="feature-icon">ğŸ’¼</text>
          <text class="feature-text">èŒä¸šå»ºè®®</text>
        </view>
        <view class="feature-item">
          <text class="feature-icon">ğŸ¤</text>
          <text class="feature-text">äººé™…å…³ç³»æŒ‡å¯¼</text>
        </view>
      </view>

      <view class="test-actions">
        <button class="btn-primary start-btn" bindtap="startTest">
          {{testProgress ? 'ç»§ç»­æµ‹è¯•' : 'å¼€å§‹æµ‹è¯•'}}
        </button>
        <button wx:if="{{testProgress}}" class="btn-secondary restart-btn" bindtap="restartTest">
          é‡æ–°å¼€å§‹
        </button>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘æµ‹è¯•è®°å½• -->
  <view wx:if="{{isLoggedIn && recentTests.length > 0}}" class="recent-section">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘çš„æµ‹è¯•è®°å½•</text>
      <text class="section-subtitle" bindtap="viewHistory">æŸ¥çœ‹å…¨éƒ¨ ></text>
    </view>

    <view class="recent-list">
      <view wx:for="{{recentTests}}" wx:key="testId"
            class="recent-item card" bindtap="viewResult" data-index="{{index}}">
        <view class="recent-header">
          <text class="recent-date">{{item.formattedDate}}</text>
          <text class="recent-score">{{item.totalScore}}åˆ†</text>
        </view>

        <view class="recent-summary">
          <text class="summary-text">{{item.summary}}</text>
        </view>

        <view class="recent-scores">
          <view class="mini-score-list">
            <view class="mini-score-item">
              <text class="mini-label">å¼€æ”¾</text>
              <text class="mini-value">{{item.formattedScores.openness}}</text>
            </view>
            <view class="mini-score-item">
              <text class="mini-label">å°½è´£</text>
              <text class="mini-value">{{item.formattedScores.conscientiousness}}</text>
            </view>
            <view class="mini-score-item">
              <text class="mini-label">å¤–å‘</text>
              <text class="mini-value">{{item.formattedScores.extraversion}}</text>
            </view>
            <view class="mini-score-item">
              <text class="mini-label">å®œäºº</text>
              <text class="mini-value">{{item.formattedScores.agreeableness}}</text>
            </view>
            <view class="mini-score-item">
              <text class="mini-label">ç¥ç»</text>
              <text class="mini-value">{{item.formattedScores.neuroticism}}</text>
            </view>
          </view>
        </view>

        <view class="recent-meta">
          <text class="recent-duration">{{item.duration}}ç§’</text>
          <text class="recent-arrow">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½ä»‹ç» -->
  <view class="features-section">
    <view class="section-header">
      <text class="section-title">æµ‹è¯•åŠŸèƒ½</text>
    </view>

    <view class="features-grid">
      <view class="feature-card">
        <view class="feature-card-icon">ğŸ¨</view>
        <text class="feature-card-title">å¼€æ”¾æ€§</text>
        <text class="feature-card-desc">åˆ›é€ åŠ›ä¸æƒ³è±¡åŠ›</text>
      </view>
      <view class="feature-card">
        <view class="feature-card-icon">ğŸ“‹</view>
        <text class="feature-card-title">å°½è´£æ€§</text>
        <text class="feature-card-desc">è‡ªå¾‹ä¸ç»„ç»‡èƒ½åŠ›</text>
      </view>
      <view class="feature-card">
        <view class="feature-card-icon">ğŸŒŸ</view>
        <text class="feature-card-title">å¤–å‘æ€§</text>
        <text class="feature-card-desc">ç¤¾äº¤æ´»è·ƒç¨‹åº¦</text>
      </view>
      <view class="feature-card">
        <view class="feature-card-icon">ğŸ¤</view>
        <text class="feature-card-title">å®œäººæ€§</text>
        <text class="feature-card-desc">åˆä½œä¸åŒç†å¿ƒ</text>
      </view>
      <view class="feature-card">
        <view class="feature-card-icon">ğŸ˜°</view>
        <text class="feature-card-title">ç¥ç»è´¨</text>
        <text class="feature-card-desc">æƒ…ç»ªç¨³å®šæ€§</text>
      </view>
      <view class="feature-card">
        <view class="feature-card-icon">ğŸ¤–</view>
        <text class="feature-card-title">AIåˆ†æ</text>
        <text class="feature-card-desc">æ™ºèƒ½ä¸ªæ€§æŠ¥å‘Š</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æç¤º -->
  <view class="footer">
    <text class="footer-text">æµ‹è¯•çº¦éœ€10-15åˆ†é’Ÿï¼Œå»ºè®®åœ¨å®‰é™ç¯å¢ƒä¸‹å®Œæˆ</text>
  </view>
</view>