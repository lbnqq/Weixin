<view class="test-crud-container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">ğŸ§ª æ•°æ®åº“CRUDæµ‹è¯•</text>
    <text class="page-subtitle">æµ‹è¯•Supabaseæ•°æ®åº“å¢åˆ æ”¹æŸ¥åŠŸèƒ½</text>
  </view>

  <!-- æµ‹è¯•çŠ¶æ€ -->
  <view class="status-section">
    <view class="status-card">
      <text class="status-label">å½“å‰çŠ¶æ€ï¼š</text>
      <text class="status-value {{isTesting ? 'status-testing' : testComplete ? 'status-complete' : 'status-ready'}}">
        {{isTesting ? 'æµ‹è¯•ä¸­' : testComplete ? 'æµ‹è¯•å®Œæˆ' : 'å‡†å¤‡å°±ç»ª'}}
      </text>
    </view>
    <view class="status-card" wx:if="{{currentStep}}">
      <text class="status-label">å½“å‰æ­¥éª¤ï¼š</text>
      <text class="status-value">{{currentStep}}</text>
    </view>
  </view>

  <!-- æµ‹è¯•æ§åˆ¶æŒ‰é’® -->
  <view class="control-section">
    <button 
      class="test-btn primary" 
      bindtap="startTest"
      disabled="{{isTesting}}"
      loading="{{isTesting}}">
      {{isTesting ? 'æµ‹è¯•ä¸­...' : 'å¼€å§‹CRUDæµ‹è¯•'}}
    </button>
    
    <view class="btn-group">
      <button 
        class="test-btn secondary" 
        bindtap="clearResults"
        disabled="{{isTesting}}">
        æ¸…ç©ºç»“æœ
      </button>
      <button 
        class="test-btn secondary" 
        bindtap="goBack"
        disabled="{{isTesting}}">
        è¿”å›
      </button>
    </view>
  </view>

  <!-- æµ‹è¯•ç»Ÿè®¡ -->
  <view class="stats-section" wx:if="{{testComplete}}">
    <view class="stats-card">
      <text class="stats-title">ğŸ“Š æµ‹è¯•ç»Ÿè®¡</text>
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-value">{{testSummary.total}}</text>
          <text class="stat-label">æ€»æµ‹è¯•</text>
        </view>
        <view class="stat-item success">
          <text class="stat-value">{{testSummary.success}}</text>
          <text class="stat-label">æˆåŠŸ</text>
        </view>
        <view class="stat-item error">
          <text class="stat-value">{{testSummary.failed}}</text>
          <text class="stat-label">å¤±è´¥</text>
        </view>
        <view class="stat-item warning">
          <text class="stat-value">{{testSummary.warning}}</text>
          <text class="stat-label">è­¦å‘Š</text>
        </view>
      </view>
      <view class="success-rate">
        <text class="success-rate-label">æˆåŠŸç‡ï¼š</text>
        <text class="success-rate-value">{{testSummary.successRate}}</text>
      </view>
    </view>
  </view>

  <!-- æµ‹è¯•ç»“æœ -->
  <view class="results-section">
    <view class="section-header">
      <text class="section-title">ğŸ“‹ æµ‹è¯•ç»“æœ</text>
      <text class="result-count">{{testResults.length}} æ¡è®°å½•</text>
    </view>
    
    <scroll-view scroll-y class="results-scroll">
      <view class="result-list">
        <view class="result-item" wx:for="{{testResults}}" wx:key="timestamp">
          <view class="result-header">
            <text class="result-operation">{{item.operation}}</text>
            <text class="result-status status-{{item.status}}">{{item.status}}</text>
          </view>
          <text class="result-message">{{item.message}}</text>
          <text class="result-timestamp">{{item.timestamp}}</text>
          
          <view class="result-data" wx:if="{{item.data}}">
            <text class="data-content">{{item.data}}</text>
          </view>
        </view>
        
        <view class="empty-state" wx:if="{{testResults.length === 0}}">
          <text class="empty-text">æš‚æ— æµ‹è¯•ç»“æœ</text>
          <text class="empty-hint">ç‚¹å‡»"å¼€å§‹CRUDæµ‹è¯•"æŒ‰é’®å¼€å§‹æµ‹è¯•</text>
        </view>
      </view>
    </scroll-view>
  </view>
</view>